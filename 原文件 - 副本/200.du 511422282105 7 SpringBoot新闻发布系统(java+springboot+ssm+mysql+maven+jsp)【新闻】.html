<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.3.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/avatar.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/avatar.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"example.com","root":"/","scheme":"Pisces","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":false,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":true,"trigger":"auto","top_n_per_article":0,"unescape":false,"preload":false},"motion":{"enable":false,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.json"};
  </script>

  <meta property="og:type" content="website">
<meta property="og:title" content="Java源码社">
<meta property="og:site_name" content="Java源码社">
<meta property="og:locale" content="zh_CN">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="http://example.com/%E5%8E%9F%E6%96%87%E4%BB%B6%20-%20%E5%89%AF%E6%9C%AC/200.du%20511422282105%207%20SpringBoot%E6%96%B0%E9%97%BB%E5%8F%91%E5%B8%83%E7%B3%BB%E7%BB%9F(java+springboot+ssm+mysql+maven+jsp)%E3%80%90%E6%96%B0%E9%97%BB%E3%80%91">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : false,
    lang   : 'zh-CN'
  };
</script>
<link rel="stylesheet" type="text/css" href="/css/injector/main.css" /><link rel="preload" as="style" href="/css/injector/light.css" /><link rel="preload" as="style" href="/css/injector/dark.css" />
  <title> | Java源码社
</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">Java源码社</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>分类</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>联系站长</a>

  </li>
        <li class="menu-item menu-item-remote">

    <a href="/remote/" rel="section"><i class="fa fa-link fa-fw"></i>远程说明</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off"
           placeholder="搜索...书店、票、购物、图书、学生…" spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result">
  <div id="no-result">
    <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>
  </div>
</div>

    </div>
  </div>

</div>
    </header>

    


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          
  
  

          <div class="content page posts-expand">
            

    
    
    
    <div class="post-block" lang="zh-CN">
      <header class="post-header">

<h1 class="post-title" itemprop="name headline">
</h1>

<div class="post-meta">
  

</div>

</header>

      
      
      

      <div class="post-body">
          <p><img src="../images/project20/020023032402.jpg" alt="020023032402"></p>
<p><img src="../images/project20/030023032402.jpg" alt="030023032402"></p>
<p><img src="../images/project20/040023032402.jpg" alt="040023032402"></p>
<p><img src="../images/project20/050023032402.jpg" alt="050023032402"></p>
<p><img src="../images/project20/070023032402.jpg" alt="070023032402"></p>
<p>——————————ProjectTitle——————————</p>
<p>一、项目简述</p>
<p>功能： 区分为管理员用户和普通用户，管理员用户能删除评论， 调整新闻显示/隐藏，修改新闻，删除普通用户，普通用户能 登陆浏览，新用户可以注册基本功能实现了新闻增加，新 闻删除，新闻修改，新闻搜索其他功能：用户评论，管理 员删除差评，新闻分类，前台分类显示新闻，用户注册， 登录，个人信息修改等等功能。</p>
<p>二、项目运行</p>
<p>环境配置： Jdk1.8  + mysql + Eclispe (IntelliJ IDEA,Eclispe,MyEclispe,Sts 都支持)</p>
<p>项目技术： JSP + SpringBoot + Servlert + htm l+ css + JavaScript + ECharts+ JQuery + Maven 等等</p>
<p>——————————NewCode——————————</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">    request.setAttribute(<span class="string">&quot;v&quot;</span>, news);</span><br><span class="line">    List&lt;Category&gt; categoryList = categoryDao.queryAll();</span><br><span class="line">    request.setAttribute(<span class="string">&quot;categoryList&quot;</span>, categoryList);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;editnews&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/queryByType&quot;)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">queryByType</span><span class="params">()</span></span>&#123;</span><br><span class="line">    String categoryid = request.getParameter(<span class="string">&quot;categoryid&quot;</span>);</span><br><span class="line"></span><br><span class="line">    List&lt;News&gt; newsList = newsDao.queryAll();</span><br><span class="line">    request.setAttribute(<span class="string">&quot;list&quot;</span>, newsList.stream()</span><br><span class="line">            .filter(x -&gt; x.getCategoryid().equals(Integer.parseInt(categoryid))).collect(Collectors.toList()));</span><br><span class="line">    List&lt;Category&gt; categoryList = categoryDao.queryAll();</span><br><span class="line">    request.setAttribute(<span class="string">&quot;categoryList&quot;</span>,</span><br><span class="line">            categoryList.stream().filter(x -&gt; x.getState().equals(<span class="string">&quot;1&quot;</span>)).collect(Collectors.toList()));</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;typenews&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/detail&quot;)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">detail</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="comment">//测试</span></span><br><span class="line">    String id =  request.getParameter(<span class="string">&quot;id&quot;</span>);</span><br><span class="line">    <span class="keyword">if</span>(id.contains(<span class="string">&quot;.jsp&quot;</span>))</span><br><span class="line">    &#123;</span><br><span class="line">       id= request.getParameter(<span class="string">&quot;id&quot;</span>).replaceAll(<span class="string">&quot;.jsp&quot;</span>,<span class="string">&quot;&quot;</span>);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    News news = newsDao.queryByid(Integer.parseInt(id));</span><br><span class="line"></span><br><span class="line">    news.setClicks(news.getClicks() + <span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">    newsDao.setClicksIncrement(news);</span><br><span class="line"></span><br><span class="line">    NewsDetail detail = <span class="keyword">new</span> NewsDetail();</span><br><span class="line">    detail.setNews(news);</span><br><span class="line"></span><br><span class="line">    Category category = categoryDao.queryById(news.getCategoryid());</span><br><span class="line"></span><br></pre></td></tr></table></figure>


<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"> * <span class="meta">@param</span> createTypeFlag</span><br><span class="line"> * <span class="meta">@return</span> String... createTypeFlag是可变参数，</span><br><span class="line"> *         Java1<span class="number">.5</span>增加了新特性：可变参数：适用于参数个数不确定，类型确定的情况，java把可变参数当做数组处理。注意：</span><br><span class="line"> *         可变参数必须位于最后一项</span><br><span class="line"> */</span><br><span class="line"><span class="function"><span class="keyword">private</span> String <span class="title">drawRandomNum</span><span class="params">(Graphics2D g, String... createTypeFlag)</span> </span>&#123;</span><br><span class="line">    <span class="comment">// 设置颜色</span></span><br><span class="line">    g.setColor(Color.RED);</span><br><span class="line">    <span class="comment">// 设置字体</span></span><br><span class="line">    g.setFont(<span class="keyword">new</span> Font(<span class="string">&quot;宋体&quot;</span>, Font.BOLD, <span class="number">20</span>));</span><br><span class="line">    <span class="comment">// 常用的中国汉字</span></span><br><span class="line">    String baseChineseChar = <span class="string">&quot;\u7684\u4e00\u4e86\u662f\u6211\u4e0d\u5728\u4eba\u4eec\u6709\u6765\u4ed6\u8fd9\u4e0a\u7740\u4e2a\u5730\u5230\u5927\u91cc\u8bf4\u5c31\u53bb\u5b50\u5f97\u4e5f\u548c\u90a3\u8981\u4e0b\u770b\u5929\u65f6\u8fc7\u51fa\u5c0f\u4e48\u8d77\u4f60\u90fd\u628a\u597d\u8fd8\u591a\u6ca1\u4e3a\u53c8\u53ef\u5bb6\u5b66\u53ea\u4ee5\u4e3b\u4f1a\u6837\u5e74\u60f3\u751f\u540c\u8001\u4e2d\u5341\u4ece\u81ea\u9762\u524d\u5934\u9053\u5b83\u540e\u7136\u8d70\u5f88\u50cf\u89c1\u4e24\u7528\u5979\u56fd\u52a8\u8fdb\u6210\u56de\u4ec0\u8fb9\u4f5c\u5bf9\u5f00\u800c\u5df1\u4e9b\u73b0\u5c71\u6c11\u5019\u7ecf\u53d1\u5de5\u5411\u4e8b\u547d\u7ed9\u957f\u6c34\u51e0\u4e49\u4e09\u58f0\u4e8e\u9ad8\u624b\u77e5\u7406\u773c\u5fd7\u70b9\u5fc3\u6218\u4e8c\u95ee\u4f46\u8eab\u65b9\u5b9e\u5403\u505a\u53eb\u5f53\u4f4f\u542c\u9769\u6253\u5462\u771f\u5168\u624d\u56db\u5df2\u6240\u654c\u4e4b\u6700\u5149\u4ea7\u60c5\u8def\u5206\u603b\u6761\u767d\u8bdd\u4e1c\u5e2d\u6b21\u4eb2\u5982\u88ab\u82b1\u53e3\u653e\u513f\u5e38\u6c14\u4e94\u7b2c\u4f7f\u5199\u519b\u5427\u6587\u8fd0\u518d\u679c\u600e\u5b9a\u8bb8\u5feb\u660e\u884c\u56e0\u522b\u98de\u5916\u6811\u7269\u6d3b\u90e8\u95e8\u65e0\u5f80\u8239\u671b\u65b0\u5e26\u961f\u5148\u529b\u5b8c\u5374\u7ad9\u4ee3\u5458\u673a\u66f4\u4e5d\u60a8\u6bcf\u98ce\u7ea7\u8ddf\u7b11\u554a\u5b69\u4e07\u5c11\u76f4\u610f\u591c\u6bd4\u9636\u8fde\u8f66\u91cd\u4fbf\u6597\u9a6c\u54ea\u5316\u592a\u6307\u53d8\u793e\u4f3c\u58eb\u8005\u5e72\u77f3\u6ee1\u65e5\u51b3\u767e\u539f\u62ff\u7fa4\u7a76\u5404\u516d\u672c\u601d\u89e3\u7acb\u6cb3\u6751\u516b\u96be\u65e9\u8bba\u5417\u6839\u5171\u8ba9\u76f8\u7814\u4eca\u5176\u4e66\u5750\u63a5\u5e94\u5173\u4fe1\u89c9\u6b65\u53cd\u5904\u8bb0\u5c06\u5343\u627e\u4e89\u9886\u6216\u5e08\u7ed3\u5757\u8dd1\u8c01\u8349\u8d8a\u5b57\u52a0\u811a\u7d27\u7231\u7b49\u4e60\u9635\u6015\u6708\u9752\u534a\u706b\u6cd5\u9898\u5efa\u8d76\u4f4d\u5531\u6d77\u4e03\u5973\u4efb\u4ef6\u611f\u51c6\u5f20\u56e2\u5c4b\u79bb\u8272\u8138\u7247\u79d1\u5012\u775b\u5229\u4e16\u521a\u4e14\u7531\u9001\u5207\u661f\u5bfc\u665a\u8868\u591f\u6574\u8ba4\u54cd\u96ea\u6d41\u672a\u573a\u8be5\u5e76\u5e95\u6df1\u523b\u5e73\u4f1f\u5fd9\u63d0\u786e\u8fd1\u4eae\u8f7b\u8bb2\u519c\u53e4\u9ed1\u544a\u754c\u62c9\u540d\u5440\u571f\u6e05\u9633\u7167\u529e\u53f2\u6539\u5386\u8f6c\u753b\u9020\u5634\u6b64\u6cbb\u5317\u5fc5\u670d\u96e8\u7a7f\u5185\u8bc6\u9a8c\u4f20\u4e1a\u83dc\u722c\u7761\u5174\u5f62\u91cf\u54b1\u89c2\u82e6\u4f53\u4f17\u901a\u51b2\u5408\u7834\u53cb\u5ea6\u672f\u996d\u516c\u65c1\u623f\u6781\u5357\u67aa\u8bfb\u6c99\u5c81\u7ebf\u91ce\u575a\u7a7a\u6536\u7b97\u81f3\u653f\u57ce\u52b3\u843d\u94b1\u7279\u56f4\u5f1f\u80dc\u6559\u70ed\u5c55\u5305\u6b4c\u7c7b\u6e10\u5f3a\u6570\u4e61\u547c\u6027\u97f3\u7b54\u54e5\u9645\u65e7\u795e\u5ea7\u7ae0\u5e2e\u5566\u53d7\u7cfb\u4ee4\u8df3\u975e\u4f55\u725b\u53d6\u5165\u5cb8\u6562\u6389\u5ffd\u79cd\u88c5\u9876\u6025\u6797\u505c\u606f\u53e5\u533a\u8863\u822c\u62a5\u53f6\u538b\u6162\u53d4\u80cc\u7ec6&quot;</span>;</span><br><span class="line">    <span class="comment">// 数字和字母的组合</span></span><br><span class="line">    String baseNumLetter = <span class="string">&quot;0123456789ABCDEFGHJKLMNOPQRSTUVWXYZ&quot;</span>;</span><br><span class="line">    <span class="comment">// 纯数字</span></span><br><span class="line">    String baseNum = <span class="string">&quot;0123456789&quot;</span>;</span><br><span class="line">    <span class="comment">// 纯字母</span></span><br><span class="line">    String baseLetter = <span class="string">&quot;ABCDEFGHJKLMNOPQRSTUVWXYZ&quot;</span>;</span><br><span class="line">    <span class="comment">// createTypeFlag[0]==null表示没有传递参数</span></span><br><span class="line">    <span class="keyword">if</span> (createTypeFlag.length &gt; <span class="number">0</span> &amp;&amp; <span class="keyword">null</span> != createTypeFlag[<span class="number">0</span>]) &#123;</span><br><span class="line">        <span class="keyword">if</span> (createTypeFlag[<span class="number">0</span>].equals(<span class="string">&quot;ch&quot;</span>)) &#123;</span><br><span class="line">            <span class="comment">// 截取汉字</span></span><br><span class="line">            <span class="keyword">return</span> createRandomChar(g, baseChineseChar);</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (createTypeFlag[<span class="number">0</span>].equals(<span class="string">&quot;nl&quot;</span>)) &#123;</span><br><span class="line">            <span class="comment">// 截取数字和字母的组合</span></span><br><span class="line">            <span class="keyword">return</span> createRandomChar(g, baseNumLetter);</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (createTypeFlag[<span class="number">0</span>].equals(<span class="string">&quot;n&quot;</span>)) &#123;</span><br><span class="line">            <span class="comment">// 截取数字</span></span><br><span class="line">            <span class="keyword">return</span> createRandomChar(g, baseNum);</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (createTypeFlag[<span class="number">0</span>].equals(<span class="string">&quot;l&quot;</span>)) &#123;</span><br><span class="line">            <span class="comment">// 截取字母</span></span><br><span class="line">            <span class="keyword">return</span> createRandomChar(g, baseLetter);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="comment">// 默认截取数字和字母的组合</span></span><br><span class="line">        <span class="keyword">return</span> createRandomChar(g, baseNumLetter);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 创建随机字符</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> g</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> baseChar</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> 随机字符</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">private</span> String <span class="title">createRandomChar</span><span class="params">(Graphics2D g, String baseChar)</span> </span>&#123;</span><br><span class="line">    StringBuffer sb = <span class="keyword">new</span> StringBuffer();</span><br><span class="line">    <span class="keyword">int</span> x = <span class="number">5</span>;</span><br><span class="line">    String ch = <span class="string">&quot;&quot;</span>;</span><br></pre></td></tr></table></figure>


<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Autowired</span></span><br><span class="line"><span class="keyword">private</span> HttpServletRequest request;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> WIDTH = <span class="number">120</span>;<span class="comment">// 生成的图片的宽度</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> HEIGHT = <span class="number">30</span>;<span class="comment">// 生成的图片的高度</span></span><br><span class="line"></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/CodeServlet&quot;)</span></span><br><span class="line"><span class="meta">@ResponseBody</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">listforadmin</span><span class="params">(HttpServletResponse response)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">    String createTypeFlag = request.getParameter(<span class="string">&quot;createTypeFlag&quot;</span>);<span class="comment">// 接收客户端传递的createTypeFlag标识</span></span><br><span class="line">    <span class="comment">// 1.在内存中创建一张图片</span></span><br><span class="line">    BufferedImage bi = <span class="keyword">new</span> BufferedImage(WIDTH, HEIGHT, BufferedImage.TYPE_INT_RGB);</span><br><span class="line">    <span class="comment">// 2.得到图片</span></span><br><span class="line">    Graphics g = bi.getGraphics();</span><br><span class="line">    <span class="comment">// 3.设置图片的背影色</span></span><br><span class="line">    setBackGround(g);</span><br><span class="line">    <span class="comment">// 4.设置图片的边框</span></span><br><span class="line">    setBorder(g);</span><br><span class="line">    <span class="comment">// 5.在图片上画干扰线</span></span><br><span class="line">    drawRandomLine(g);</span><br><span class="line">    <span class="comment">// 6.写在图片上随机数</span></span><br><span class="line">    <span class="comment">// String random = drawRandomNum((Graphics2D) g,&quot;ch&quot;);//生成中文验证码图片</span></span><br><span class="line">    <span class="comment">// String random = drawRandomNum((Graphics2D) g,&quot;nl&quot;);//生成数字和字母组合的验证码图片</span></span><br><span class="line">    <span class="comment">// String random = drawRandomNum((Graphics2D) g,&quot;n&quot;);//生成纯数字的验证码图片</span></span><br><span class="line">    <span class="comment">// String random = drawRandomNum((Graphics2D) g,&quot;l&quot;);//生成纯字母的验证码图片</span></span><br><span class="line">    String random = drawRandomNum((Graphics2D) g, createTypeFlag);<span class="comment">// 根据客户端传递的createTypeFlag标识生成验证码图片</span></span><br><span class="line">    <span class="comment">// 7.将随机数存在session中</span></span><br><span class="line">    request.getSession().setAttribute(<span class="string">&quot;checkcode&quot;</span>, random);</span><br><span class="line">    <span class="comment">// 8.设置响应头通知浏览器以图片的形式打开</span></span><br><span class="line">    response.setContentType(<span class="string">&quot;image/jpeg&quot;</span>);<span class="comment">// 等同于response.setHeader(&quot;Content-Type&quot;,</span></span><br><span class="line">    <span class="comment">// &quot;image/jpeg&quot;);</span></span><br><span class="line">    <span class="comment">// 9.设置响应头控制浏览器不要缓存</span></span><br><span class="line">    response.setDateHeader(<span class="string">&quot;expries&quot;</span>, -<span class="number">1</span>);</span><br><span class="line">    response.setHeader(<span class="string">&quot;Cache-Control&quot;</span>, <span class="string">&quot;no-cache&quot;</span>);</span><br><span class="line">    response.setHeader(<span class="string">&quot;Pragma&quot;</span>, <span class="string">&quot;no-cache&quot;</span>);</span><br><span class="line">    <span class="comment">// 10.将图片写给浏览器</span></span><br><span class="line">    ImageIO.write(bi, <span class="string">&quot;jpg&quot;</span>, response.getOutputStream());</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 设置图片的背景色</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> g</span></span><br><span class="line"><span class="comment"> */</span></span><br></pre></td></tr></table></figure>


<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">                <span class="comment">// 截取数字</span></span><br><span class="line">                <span class="keyword">return</span> createRandomChar(g, baseNum);</span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (createTypeFlag[<span class="number">0</span>].equals(<span class="string">&quot;l&quot;</span>)) &#123;</span><br><span class="line">                <span class="comment">// 截取字母</span></span><br><span class="line">                <span class="keyword">return</span> createRandomChar(g, baseLetter);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="comment">// 默认截取数字和字母的组合</span></span><br><span class="line">            <span class="keyword">return</span> createRandomChar(g, baseNumLetter);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 创建随机字符</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> g</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> baseChar</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> 随机字符</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> String <span class="title">createRandomChar</span><span class="params">(Graphics2D g, String baseChar)</span> </span>&#123;</span><br><span class="line">        StringBuffer sb = <span class="keyword">new</span> StringBuffer();</span><br><span class="line">        <span class="keyword">int</span> x = <span class="number">5</span>;</span><br><span class="line">        String ch = <span class="string">&quot;&quot;</span>;</span><br><span class="line">        <span class="comment">// 控制字数</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">4</span>; i++) &#123;</span><br><span class="line">            <span class="comment">// 设置字体旋转角度</span></span><br><span class="line">            <span class="keyword">int</span> degree = <span class="keyword">new</span> Random().nextInt() % <span class="number">30</span>;</span><br><span class="line">            ch = baseChar.charAt(<span class="keyword">new</span> Random().nextInt(baseChar.length())) + <span class="string">&quot;&quot;</span>;</span><br><span class="line">            sb.append(ch);</span><br><span class="line">            <span class="comment">// 正向角度</span></span><br><span class="line">            g.rotate(degree * Math.PI / <span class="number">180</span>, x, <span class="number">20</span>);</span><br><span class="line">            g.drawString(ch, x, <span class="number">20</span>);</span><br><span class="line">            <span class="comment">// 反向角度</span></span><br><span class="line">            g.rotate(-degree * Math.PI / <span class="number">180</span>, x, <span class="number">20</span>);</span><br><span class="line">            x += <span class="number">30</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> sb.toString();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">package</span> com.demo.controller;</span><br><span class="line"></span><br></pre></td></tr></table></figure>


<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">    <span class="meta">@RequestMapping(&quot;/show&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">show</span><span class="params">()</span></span>&#123;</span><br><span class="line">        List&lt;Category&gt; categoryList = categoryDao.queryAll();</span><br><span class="line">        categoryList=categoryList.stream().filter(x-&gt;x.getState().equals(<span class="string">&quot;1&quot;</span>)).collect(Collectors.toList());</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span>(categoryList.size()&gt;=<span class="number">5</span>)</span><br><span class="line">        &#123;</span><br><span class="line"></span><br><span class="line">            request.setAttribute(<span class="string">&quot;list&quot;</span>, categoryDao.queryAll());</span><br><span class="line">            request.setAttribute(<span class="string">&quot;msg&quot;</span>,<span class="string">&quot;设置栏目显示失败，前台栏目最多显示5个&quot;</span>);</span><br><span class="line">            <span class="keyword">return</span> <span class="string">&quot;listcategory&quot;</span>;</span><br><span class="line">        &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">            categoryDao.show(Integer.parseInt(request.getParameter(<span class="string">&quot;id&quot;</span>)));</span><br><span class="line">            <span class="keyword">return</span> <span class="string">&quot;redirect:listforadmin&quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/hidden&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">hidden</span><span class="params">()</span></span>&#123;</span><br><span class="line"></span><br><span class="line">        categoryDao.hidden(Integer.parseInt(request.getParameter(<span class="string">&quot;id&quot;</span>)));</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;redirect:listforadmin&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/add&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">add</span><span class="params">()</span></span>&#123;</span><br><span class="line">        String name=request.getParameter(<span class="string">&quot;name&quot;</span>);</span><br><span class="line">        String state=request.getParameter(<span class="string">&quot;state&quot;</span>);</span><br><span class="line">        Category category=<span class="keyword">new</span> Category();</span><br><span class="line">        category.setName(name);</span><br><span class="line">        category.setState(state);</span><br><span class="line">        categoryDao.save(category);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;redirect:listforadmin&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">package</span> com.demo.controller;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>


<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">        request.setAttribute(<span class="string">&quot;list&quot;</span>, list);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;listusers&quot;</span>;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">package</span> com.demo.controller;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;CategoryServlet&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CategoryController</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> HttpServletRequest request;</span><br><span class="line">    <span class="keyword">private</span> CategoryDao categoryDao=<span class="keyword">new</span> CategoryDao();</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/listforadmin&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">listforadmin</span><span class="params">()</span></span>&#123;</span><br><span class="line">        List&lt;Category&gt; categoryList = categoryDao.queryAll();</span><br><span class="line">        request.setAttribute(<span class="string">&quot;list&quot;</span>, categoryList);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;listcategory&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/show&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">show</span><span class="params">()</span></span>&#123;</span><br><span class="line">        List&lt;Category&gt; categoryList = categoryDao.queryAll();</span><br><span class="line">        categoryList=categoryList.stream().filter(x-&gt;x.getState().equals(<span class="string">&quot;1&quot;</span>)).collect(Collectors.toList());</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span>(categoryList.size()&gt;=<span class="number">5</span>)</span><br><span class="line">        &#123;</span><br><span class="line"></span><br><span class="line">            request.setAttribute(<span class="string">&quot;list&quot;</span>, categoryDao.queryAll());</span><br><span class="line">            request.setAttribute(<span class="string">&quot;msg&quot;</span>,<span class="string">&quot;设置栏目显示失败，前台栏目最多显示5个&quot;</span>);</span><br><span class="line">            <span class="keyword">return</span> <span class="string">&quot;listcategory&quot;</span>;</span><br><span class="line">        &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">            categoryDao.show(Integer.parseInt(request.getParameter(<span class="string">&quot;id&quot;</span>)));</span><br><span class="line">            <span class="keyword">return</span> <span class="string">&quot;redirect:listforadmin&quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>



      </div>
      
      
      
    </div>
    

    
    
    


          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt=""
      src="/images/avatar.png">
  <p class="site-author-name" itemprop="name"></p>
  <div class="site-description" itemprop="description">购买方式见各详情页<b>底部</b><br>所有项目均可<b><a href="/remote">免费远程</a></b>搭建调试运行</div>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        



        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>

<script src="/js/utils.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  




  
<script src="/js/local-search.js"></script>













  

  
<div class="moon-menu">
  <div class="moon-menu-items">
    
    <div id="moon-menu-item-back2bottom" class="moon-menu-item">
      <i class='fas fa-chevron-down'></i>    </div>
    
    <div id="moon-menu-item-back2top" class="moon-menu-item">
      <i class='fas fa-chevron-up'></i>    </div>
    
  </div>
  <div class="moon-menu-button">
    <svg class="moon-menu-bg">
      <circle class="moon-menu-cricle" cx="50%" cy="50%" r="44%"></circle>
      <circle class="moon-menu-border" cx="50%" cy="50%" r="48%"></circle>
    </svg>
    <div class="moon-menu-content">
      <div class="moon-menu-icon"><i class='fas fa-ellipsis-v'></i></div>
      <div class="moon-menu-text"></div>
    </div>
  </div>
</div><script src="/js/injector.js"></script>
</body>
</html>
